# Comparing `tmp/odoo_addon_sale_order_line_price_history-15.0.1.0.0.7-py3-none-any.whl.zip` & `tmp/odoo_addon_sale_order_line_price_history-16.0.1.0.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,32 +1,31 @@
-Zip file size: 35606 bytes, number of entries: 30
--rw-r--r--  2.0 unx     4271 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/README.rst
--rw-r--r--  2.0 unx      107 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/__init__.py
--rw-r--r--  2.0 unx      855 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/__manifest__.py
--rw-r--r--  2.0 unx     8525 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/i18n/de.po
--rw-r--r--  2.0 unx     8688 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/i18n/es.po
--rw-r--r--  2.0 unx     7971 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/i18n/fr.po
--rw-r--r--  2.0 unx     8672 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/i18n/pt.po
--rw-r--r--  2.0 unx     7574 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/i18n/sale_order_line_price_history.pot
--rw-r--r--  2.0 unx     8424 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/i18n/zh_CN.po
--rw-r--r--  2.0 unx       30 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/models/__init__.py
--rw-r--r--  2.0 unx      396 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/models/sale_order_line.py
--rw-r--r--  2.0 unx      247 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      177 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      560 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/readme/ROADMAP.rst
--rw-r--r--  2.0 unx      593 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/readme/USAGE.rst
--rw-r--r--  2.0 unx      376 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/security/ir.model.access.csv
--rw-r--r--  2.0 unx     5539 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/static/description/icon.png
--rw-r--r--  2.0 unx    14088 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/static/description/index.html
--rw-r--r--  2.0 unx     1999 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/static/src/js/sale_line_price_history_widget.js
--rw-r--r--  2.0 unx      373 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/static/src/xml/sale_line_price_history_widget.xml
--rw-r--r--  2.0 unx      113 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/tests/__init__.py
--rw-r--r--  2.0 unx     7006 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/tests/test_sale_order_line_price_history.py
--rw-r--r--  2.0 unx     1067 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/views/sale_views.xml
--rw-r--r--  2.0 unx      108 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/wizards/__init__.py
--rw-r--r--  2.0 unx     4511 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.py
--rw-r--r--  2.0 unx     4067 b- defN 23-May-06 06:58 odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.xml
--rw-r--r--  2.0 unx     4827 b- defN 23-May-06 07:00 odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-06 07:00 odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-May-06 07:00 odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3628 b- defN 23-May-06 07:00 odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/RECORD
-30 files, 104889 bytes uncompressed, 29326 bytes compressed:  72.0%
+Zip file size: 34150 bytes, number of entries: 29
+-rw-r--r--  2.0 unx     4271 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/README.rst
+-rw-r--r--  2.0 unx      107 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/__init__.py
+-rw-r--r--  2.0 unx      757 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/__manifest__.py
+-rw-r--r--  2.0 unx     8525 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/i18n/de.po
+-rw-r--r--  2.0 unx     8688 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/i18n/es.po
+-rw-r--r--  2.0 unx     8672 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/i18n/pt.po
+-rw-r--r--  2.0 unx     7962 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/i18n/sale_order_line_price_history.pot
+-rw-r--r--  2.0 unx     8424 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/i18n/zh_CN.po
+-rw-r--r--  2.0 unx       30 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/models/__init__.py
+-rw-r--r--  2.0 unx      396 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/models/sale_order_line.py
+-rw-r--r--  2.0 unx      247 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      177 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      560 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx      593 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/readme/USAGE.rst
+-rw-r--r--  2.0 unx      376 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     5539 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/static/description/icon.png
+-rw-r--r--  2.0 unx    14088 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/static/description/index.html
+-rw-r--r--  2.0 unx     1180 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/static/src/js/sale_line_price_history_widget.js
+-rw-r--r--  2.0 unx      383 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/static/src/xml/sale_line_price_history_widget.xml
+-rw-r--r--  2.0 unx      113 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/tests/__init__.py
+-rw-r--r--  2.0 unx     7006 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/tests/test_sale_order_line_price_history.py
+-rw-r--r--  2.0 unx      864 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/views/sale_views.xml
+-rw-r--r--  2.0 unx      108 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/wizards/__init__.py
+-rw-r--r--  2.0 unx     4823 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.py
+-rw-r--r--  2.0 unx     4087 b- defN 23-May-13 08:43 odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.xml
+-rw-r--r--  2.0 unx     4828 b- defN 23-May-13 08:43 odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-13 08:43 odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-May-13 08:43 odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     3518 b- defN 23-May-13 08:43 odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/RECORD
+29 files, 96419 bytes uncompressed, 28050 bytes compressed:  70.9%
```

## zipnote {}

```diff
@@ -9,17 +9,14 @@
 
 Filename: odoo/addons/sale_order_line_price_history/i18n/de.po
 Comment: 
 
 Filename: odoo/addons/sale_order_line_price_history/i18n/es.po
 Comment: 
 
-Filename: odoo/addons/sale_order_line_price_history/i18n/fr.po
-Comment: 
-
 Filename: odoo/addons/sale_order_line_price_history/i18n/pt.po
 Comment: 
 
 Filename: odoo/addons/sale_order_line_price_history/i18n/sale_order_line_price_history.pot
 Comment: 
 
 Filename: odoo/addons/sale_order_line_price_history/i18n/zh_CN.po
@@ -72,20 +69,20 @@
 
 Filename: odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.py
 Comment: 
 
 Filename: odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.xml
 Comment: 
 
-Filename: odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/METADATA
+Filename: odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/WHEEL
+Filename: odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/top_level.txt
+Filename: odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/RECORD
+Filename: odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/sale_order_line_price_history/README.rst

```diff
@@ -10,21 +10,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fsale--workflow-lightgray.png?logo=github
-    :target: https://github.com/OCA/sale-workflow/tree/15.0/sale_order_line_price_history
+    :target: https://github.com/OCA/sale-workflow/tree/16.0/sale_order_line_price_history
     :alt: OCA/sale-workflow
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/sale-workflow-15-0/sale-workflow-15-0-sale_order_line_price_history
+    :target: https://translation.odoo-community.org/projects/sale-workflow-16-0/sale-workflow-16-0-sale_order_line_price_history
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/167/15.0
+    :target: https://runbot.odoo-community.org/runbot/167/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 This module extends the functionality of Sales to allow you to see the price
 history of a product from a sale order line and set one of these old prices in
 the sale order line.
@@ -64,15 +64,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/sale-workflow/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_order_line_price_history%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_order_line_price_history%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -102,10 +102,10 @@
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/sale-workflow <https://github.com/OCA/sale-workflow/tree/15.0/sale_order_line_price_history>`_ project on GitHub.
+This module is part of the `OCA/sale-workflow <https://github.com/OCA/sale-workflow/tree/16.0/sale_order_line_price_history>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/sale_order_line_price_history/__manifest__.py

```diff
@@ -1,25 +1,23 @@
 # Copyright 2019 Tecnativa - Ernesto Tejeda
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 {
     "name": "Sale order line price history",
-    "version": "15.0.1.0.0",
+    "version": "16.0.1.0.0",
     "category": "Sales Management",
     "author": "Tecnativa," "Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/sale-workflow",
     "license": "AGPL-3",
     "depends": ["sale"],
     "data": [
         "security/ir.model.access.csv",
         "wizards/sale_order_line_price_history.xml",
         "views/sale_views.xml",
     ],
     "assets": {
         "web.assets_backend": [
-            "sale_order_line_price_history/static/src/js/sale_line_price_history_widget.js",
-        ],
-        "web.assets_qweb": [
-            "sale_order_line_price_history/static/src/xml/sale_line_price_history_widget.xml",
+            "sale_order_line_price_history/static/src/js/*.js",
+            "sale_order_line_price_history/static/src/xml/*.xml",
         ],
     },
     "installable": True,
 }
```

## odoo/addons/sale_order_line_price_history/i18n/sale_order_line_price_history.pot

```diff
@@ -1,14 +1,14 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* sale_order_line_price_history
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 15.0\n"
+"Project-Id-Version: Odoo Server 16.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
@@ -106,24 +106,36 @@
 #. module: sale_order_line_price_history
 #: model:ir.model.fields,field_description:sale_order_line_price_history.field_sale_order_line_price_history__write_date
 #: model:ir.model.fields,field_description:sale_order_line_price_history.field_sale_order_line_price_history_line__write_date
 msgid "Last Updated on"
 msgstr ""
 
 #. module: sale_order_line_price_history
+#. odoo-python
+#: code:addons/sale_order_line_price_history/wizards/sale_order_line_price_history.py:0
+#, python-format
+msgid "Not found historical sale order line for this action!"
+msgstr ""
+
+#. module: sale_order_line_price_history
 #: model:ir.model.fields,field_description:sale_order_line_price_history.field_sale_order_line_price_history_line__sale_order_date_order
 msgid "Order Date"
 msgstr ""
 
 #. module: sale_order_line_price_history
 #: model:ir.model.fields,field_description:sale_order_line_price_history.field_sale_order_line_price_history_line__order_id
 msgid "Order Reference"
 msgstr ""
 
 #. module: sale_order_line_price_history
+#: model_terms:ir.ui.view,arch_db:sale_order_line_price_history.view_order_form
+msgid "Price History"
+msgstr ""
+
+#. module: sale_order_line_price_history
 #: model:ir.actions.act_window,name:sale_order_line_price_history.sale_order_line_price_history_action
 msgid "Price history per customer"
 msgstr ""
 
 #. module: sale_order_line_price_history
 #: model:ir.model.fields,field_description:sale_order_line_price_history.field_sale_order_line_price_history__product_id
 msgid "Product"
```

## odoo/addons/sale_order_line_price_history/static/description/index.html

### odoo/addons/sale_order_line_price_history/static/description/index.html

```diff
@@ -367,21 +367,21 @@
       <p>
         <a class="reference external" href="https://odoo-community.org/page/development-status">
           <img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png"/>
         </a>
         <a class="reference external" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html">
           <img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png"/>
         </a>
-        <a class="reference external" href="https://github.com/OCA/sale-workflow/tree/15.0/sale_order_line_price_history">
+        <a class="reference external" href="https://github.com/OCA/sale-workflow/tree/16.0/sale_order_line_price_history">
           <img alt="OCA/sale-workflow" src="https://img.shields.io/badge/github-OCA%2Fsale--workflow-lightgray.png?logo=github"/>
         </a>
-        <a class="reference external" href="https://translation.odoo-community.org/projects/sale-workflow-15-0/sale-workflow-15-0-sale_order_line_price_history">
+        <a class="reference external" href="https://translation.odoo-community.org/projects/sale-workflow-16-0/sale-workflow-16-0-sale_order_line_price_history">
           <img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png"/>
         </a>
-        <a class="reference external" href="https://runbot.odoo-community.org/runbot/167/15.0">
+        <a class="reference external" href="https://runbot.odoo-community.org/runbot/167/16.0">
           <img alt="Try me on Runbot" src="https://img.shields.io/badge/runbot-Try%20me-875A7B.png"/>
         </a>
       </p>
       <p>This module extends the functionality of Sales to allow you to see the price
 history of a product from a sale order line and set one of these old prices in
 the sale order line.</p>
       <p>
@@ -465,15 +465,15 @@
         </h1>
         <p>
           Bugs are tracked on
           <a class="reference external" href="https://github.com/OCA/sale-workflow/issues">GitHub Issues</a>
           .
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-          <a class="reference external" href="https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_order_line_price_history%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
+          <a class="reference external" href="https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_order_line_price_history%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>
           .
         </p>
         <p>Do not contact contributors directly about support or help with technical issues.</p>
       </div>
       <div class="section" id="credits">
         <h1>
           <a class="toc-backref" href="#id4">Credits</a>
@@ -526,15 +526,15 @@
             <img alt="Odoo Community Association" src="https://odoo-community.org/logo.png"/>
           </a>
           <p>OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.</p>
           <p>
             This module is part of the
-            <a class="reference external" href="https://github.com/OCA/sale-workflow/tree/15.0/sale_order_line_price_history">OCA/sale-workflow</a>
+            <a class="reference external" href="https://github.com/OCA/sale-workflow/tree/16.0/sale_order_line_price_history">OCA/sale-workflow</a>
             project on GitHub.
           </p>
           <p>
             You are welcome to contribute. To learn how please visit
             <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>
             .
           </p>
```

## odoo/addons/sale_order_line_price_history/static/src/js/sale_line_price_history_widget.js

### js-beautify {}

```diff
@@ -1,58 +1,40 @@
-/* Copyright 2021 Tecnativa - David Vidal
- * License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl.html).
- */
-odoo.define("sale_order_line_price_history.price_history_widget", function(require) {
-    "use strict";
-
-    var Widget = require("web.Widget");
-    var widget_registry = require("web.widget_registry");
-
-    var SaleOrderLinePriceHistoryWidget = Widget.extend({
-        template: "sale_order_line_price_history.price_history_widget",
-        events: _.extend({}, Widget.prototype.events, {
-            "click .price_history": "_onClickButton",
-        }),
-
-        init: function(parent, params) {
-            this.data = params.data;
-            this._super(parent);
-        },
-
-        updateState: function(state) {
-            var candidate = state.data[this.getParent().currentRow];
-            if (candidate) {
-                this.data = candidate.data;
-                this.renderElement();
-            }
-        },
-
-        _onClickButton: function() {
-            // When it's a new line, we can't rely on a line id for the wizard, but
-            // we can provide the proper element to find the historic lines.
-            this.$el.find(".price_history").prop("special_click", true);
-            var additional_context = {};
-            if (this.data.id) {
-                additional_context = {
-                    active_id: this.data.id
-                };
-            } else {
-                additional_context = {
-                    default_partner_id: this.data.order_partner_id.res_id,
-                    default_product_id: this.data.product_id.res_id,
-                };
+/** @odoo-module **/
+const {
+    Component
+} = owl;
+// Import the registry
+import {
+    registry
+} from "@web/core/registry";
+import {
+    standardFieldProps
+} from "@web/views/fields/standard_field_props";
+import {
+    useService
+} from "@web/core/utils/hooks";
+
+export class PriceHistoryWidget extends Component {
+    setup() {
+        super.setup();
+        this.actionService = useService("action");
+    }
+
+    viewPriceHistory() {
+        this.actionService.doAction(
+            "sale_order_line_price_history.sale_order_line_price_history_action", {
+                additionalContext: {
+                    default_product_id: this.props.record.data.product_id[0],
+                    default_partner_id: this.props.record.data.order_partner_id[0],
+                    default_active_id: this.props.value,
+                    default_sale_order_line_id: this.props.value,
+                },
             }
-            this.do_action(
-                "sale_order_line_price_history.sale_order_line_price_history_action", {
-                    additional_context: additional_context,
-                }
-            );
-        },
-    });
+        );
+    }
+}
 
-    widget_registry.add(
-        "sale_line_price_history_widget",
-        SaleOrderLinePriceHistoryWidget
-    );
+PriceHistoryWidget.template = "sale_order_line_price_history.price_history_widget";
+PriceHistoryWidget.props = standardFieldProps;
 
-    return SaleOrderLinePriceHistoryWidget;
-});
+// Add the field to the correct category
+registry.category("fields").add("sale_line_price_history_widget", PriceHistoryWidget);
```

## odoo/addons/sale_order_line_price_history/static/src/xml/sale_line_price_history_widget.xml

### odoo/addons/sale_order_line_price_history/static/src/xml/sale_line_price_history_widget.xml

```diff
@@ -1,10 +1,10 @@
 <?xml version="1.0" encoding="utf-8"?>
 <!-- Copyright 2021 Tecnativa - David Vidal
      License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl.html). -->
 <templates>
-  <div t-name="sale_order_line_price_history.price_history_widget">
+  <t t-name="sale_order_line_price_history.price_history_widget" owl="1">
     <div>
-      <a tabindex="0" class="fa fa-clock-o text-dark price_history"/>
+      <a tabindex="0" t-on-click="viewPriceHistory" class="fa fa-history"/>
     </div>
-  </div>
+  </t>
 </templates>
```

## odoo/addons/sale_order_line_price_history/views/sale_views.xml

### odoo/addons/sale_order_line_price_history/views/sale_views.xml

```diff
@@ -5,13 +5,12 @@
   <record id="view_order_form" model="ir.ui.view">
     <field name="name">sale.order.line.price.history.form</field>
     <field name="model">sale.order</field>
     <field name="inherit_id" ref="sale.view_order_form"/>
     <field name="arch" type="xml">
       <xpath expr="//field[@name='order_line']/tree">
         <field name="order_partner_id" invisible="1"/>
-        <widget name="sale_line_price_history_widget" width="20px" attrs="{'invisible': [('id', '!=', False)]}"/>
-        <button name="%(sale_order_line_price_history_action)d" type="action" icon="fa-clock-o" attrs="{'invisible': [('id', '=', False)]}"/>
+        <field name="id" string="Price History" context="{'active_id': id, 'active_ids': [id]}" widget="sale_line_price_history_widget"/>
       </xpath>
     </field>
   </record>
 </odoo>
```

## odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.py

```diff
@@ -1,10 +1,11 @@
 # Copyright 2019 Tecnativa - Ernesto Tejeda
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
-from odoo import api, fields, models
+from odoo import _, api, fields, models
+from odoo.exceptions import ValidationError
 
 
 class SaleOrderLinePriceHistory(models.TransientModel):
     _name = "sale.order.line.price.history"
     _description = "Sale order line price history"
 
     @api.model
@@ -76,14 +77,15 @@
             vals.append(
                 (
                     0,
                     False,
                     {
                         "sale_order_line_id": order_line.id,
                         "history_sale_order_line_id": self.sale_order_line_id.id,
+                        "history_id": self.id,
                     },
                 )
             )
         self.line_ids = vals
 
 
 class SaleOrderLinePriceHistoryline(models.TransientModel):
@@ -127,9 +129,15 @@
 
         This method is invoke by action_set_price method in this model.
         """
         self.ensure_one()
         return {"price_unit": self.price_unit, "discount": self.discount}
 
     def action_set_price(self):
-        self.ensure_one()
-        self.history_sale_order_line_id.write(self._prepare_set_price_history_vals())
+        if self.history_sale_order_line_id and self.sale_order_line_id:
+            self.history_sale_order_line_id.write(
+                self._prepare_set_price_history_vals()
+            )
+        else:
+            raise ValidationError(
+                _("Not found historical sale order line for this action!")
+            )
```

## odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.xml

### odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.xml

```diff
@@ -9,16 +9,16 @@
       <form>
         <group col="4">
           <field name="partner_id"/>
           <field name="product_id" readonly="1"/>
           <field name="include_commercial_partner"/>
           <field name="include_quotations"/>
         </group>
-        <group string="Sale history">
-          <field name="line_ids" nolabel="1" readonly="1">
+        <group string="Sale history" col="2">
+          <field name="line_ids" nolabel="1" readonly="1" colspan="2">
             <form>
               <div class="oe_button_box" name="button_box" attrs="{'invisible': [('history_sale_order_line_id', '=', False)]}">
                 <button class="oe_stat_button" string="Set price" type="object" name="action_set_price" icon="fa-check"/>
               </div>
               <group>
                 <field name="sale_order_line_id" invisible="1"/>
                 <field name="history_sale_order_line_id" invisible="1"/>
```

## Comparing `odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/METADATA` & `odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 Metadata-Version: 2.1
 Name: odoo-addon-sale-order-line-price-history
-Version: 15.0.1.0.0.7
+Version: 16.0.1.0.0.2
 Summary: Sale order line price history
 Home-page: https://github.com/OCA/sale-workflow
 Author: Tecnativa,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 15.0
+Classifier: Framework :: Odoo :: 16.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
-Requires-Python: >=3.8
-Requires-Dist: odoo (<15.1dev,>=15.0a)
+Requires-Python: >=3.10
+Requires-Dist: odoo (<16.1dev,>=16.0a)
 
 =============================
 Sale order line price history
 =============================
 
 .. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
@@ -26,21 +26,21 @@
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fsale--workflow-lightgray.png?logo=github
-    :target: https://github.com/OCA/sale-workflow/tree/15.0/sale_order_line_price_history
+    :target: https://github.com/OCA/sale-workflow/tree/16.0/sale_order_line_price_history
     :alt: OCA/sale-workflow
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/sale-workflow-15-0/sale-workflow-15-0-sale_order_line_price_history
+    :target: https://translation.odoo-community.org/projects/sale-workflow-16-0/sale-workflow-16-0-sale_order_line_price_history
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
-    :target: https://runbot.odoo-community.org/runbot/167/15.0
+    :target: https://runbot.odoo-community.org/runbot/167/16.0
     :alt: Try me on Runbot
 
 |badge1| |badge2| |badge3| |badge4| |badge5| 
 
 This module extends the functionality of Sales to allow you to see the price
 history of a product from a sale order line and set one of these old prices in
 the sale order line.
@@ -80,15 +80,15 @@
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/sale-workflow/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us smashing it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_order_line_price_history%0Aversion:%2015.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/sale-workflow/issues/new?body=module:%20sale_order_line_price_history%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
@@ -118,12 +118,12 @@
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
 OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.
 
-This module is part of the `OCA/sale-workflow <https://github.com/OCA/sale-workflow/tree/15.0/sale_order_line_price_history>`_ project on GitHub.
+This module is part of the `OCA/sale-workflow <https://github.com/OCA/sale-workflow/tree/16.0/sale_order_line_price_history>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## Comparing `odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/RECORD` & `odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/RECORD`

 * *Files 13% similar despite different names*

```diff
@@ -1,30 +1,29 @@
-odoo/addons/sale_order_line_price_history/README.rst,sha256=ElHWztn2ulTktGZZIEDiNs4WlywG8EwOasWgNyMgfTE,4271
+odoo/addons/sale_order_line_price_history/README.rst,sha256=okARKHe9cjSZpVMPDtZl-f9W2vOuW6fLEw8UapisD2s,4271
 odoo/addons/sale_order_line_price_history/__init__.py,sha256=brhoaFFAwaruL2nl_d1L2uSOxMi02qaQhuOYw8JVZfM,107
-odoo/addons/sale_order_line_price_history/__manifest__.py,sha256=7MMXr-_lI4OMTxt1pfIvt2cfaNdHOLTTtAehFjqzfzE,855
+odoo/addons/sale_order_line_price_history/__manifest__.py,sha256=9_GmzR0atdgstDxD5_fg0pDVWUV7ag3RUM4yhI7wjWw,757
 odoo/addons/sale_order_line_price_history/i18n/de.po,sha256=mykUb28sBkr8t6NKY_7Qx_8_eYSSR-JnHiTedSILvPU,8525
 odoo/addons/sale_order_line_price_history/i18n/es.po,sha256=31wTdIreuLzj8TAO6-N4ayws7mlw9VIwsJrdZgM8Ttk,8688
-odoo/addons/sale_order_line_price_history/i18n/fr.po,sha256=QTN8NG_Zpj7SglZS_2KeABl01URK22nL0SIZc3lCspY,7971
 odoo/addons/sale_order_line_price_history/i18n/pt.po,sha256=j1OZyt2XcSnzbxzm6FlR-_3KWKQXzc6SUO88RB7Gtdc,8672
-odoo/addons/sale_order_line_price_history/i18n/sale_order_line_price_history.pot,sha256=7C_3fJi-vsE0yLk7WyYrIkwVsSuAGNsUyrAvlWWCevg,7574
+odoo/addons/sale_order_line_price_history/i18n/sale_order_line_price_history.pot,sha256=32C0KbZ2AP28iq5r670n3Uc68aPBL8HQ3wuNfx6vHlA,7962
 odoo/addons/sale_order_line_price_history/i18n/zh_CN.po,sha256=iF50_HOotyNnuc9lMN27euc0iQp2otNeBZroXx6sXO0,8424
 odoo/addons/sale_order_line_price_history/models/__init__.py,sha256=0XTNG-MzihYtVvjGhNDM789gpRyLtTlIZGa1FuLbzV8,30
 odoo/addons/sale_order_line_price_history/models/sale_order_line.py,sha256=O_7DJGXrmsrOZadWjXx-84atVjyeo2d853bWY_CjRFU,396
 odoo/addons/sale_order_line_price_history/readme/CONTRIBUTORS.rst,sha256=n9Ytj8ux2uz9igQEwHpEfAGwabaNcB5xF0w1Y1MyvG0,247
 odoo/addons/sale_order_line_price_history/readme/DESCRIPTION.rst,sha256=xvhpY8tNkkZm36rAOuzGY5lhNOZWPzlM3_ZSp3--O_U,177
 odoo/addons/sale_order_line_price_history/readme/ROADMAP.rst,sha256=Py2yf3drmnr1x_xNBNRysbbi324nys2RtQWCy2c01hI,560
 odoo/addons/sale_order_line_price_history/readme/USAGE.rst,sha256=-k5vCmUbbLxs7rAOnnCQu0vL7XcekLAbvC4c1amL8n0,593
 odoo/addons/sale_order_line_price_history/security/ir.model.access.csv,sha256=-xV8TK4oWmh8gS9ZJ7evKG00XUlMI9_ScHIp2Q-6HBo,376
 odoo/addons/sale_order_line_price_history/static/description/icon.png,sha256=8DNYbvnWbkSSF1SIUi90Dgrlx8rhu3FhQFuB0B4x_aM,5539
-odoo/addons/sale_order_line_price_history/static/description/index.html,sha256=r9mLkjdxKFCyd5oc4cOFQninTSAk5jxD6HdpPQPMHAg,14088
-odoo/addons/sale_order_line_price_history/static/src/js/sale_line_price_history_widget.js,sha256=NkGZNfumXvdiYPX0t2KafLOUSjPFPhIA89MPnoGqEhI,1999
-odoo/addons/sale_order_line_price_history/static/src/xml/sale_line_price_history_widget.xml,sha256=TQCxkUm89JEEf_CTwh9zwpKdhQw1TV5dy_s-dtjlKLw,373
+odoo/addons/sale_order_line_price_history/static/description/index.html,sha256=ueAU7e9HhhoRVwQ6EfjOy5EBXauNPam9drmU1DxIyqw,14088
+odoo/addons/sale_order_line_price_history/static/src/js/sale_line_price_history_widget.js,sha256=Uh_1uF09hDYh8cR478DDP2tduEhQMGiemX9a3x7Okpc,1180
+odoo/addons/sale_order_line_price_history/static/src/xml/sale_line_price_history_widget.xml,sha256=-CJTcCLnc1vXaNzjYOyAImz4BZve7RpvbiUpXkVj2nE,383
 odoo/addons/sale_order_line_price_history/tests/__init__.py,sha256=H4hm_PRn7LJwDONE83dpxgfy7z11KWU5Y0njnoPKBGM,113
 odoo/addons/sale_order_line_price_history/tests/test_sale_order_line_price_history.py,sha256=jh22gwfJmkGutvnFr9dEpfFmWjdihGO--vJY-8rSd4I,7006
-odoo/addons/sale_order_line_price_history/views/sale_views.xml,sha256=uQvi7KoQEE4cCp6gyocWTQkz1FcPHIBKAnKYYjNlwz8,1067
+odoo/addons/sale_order_line_price_history/views/sale_views.xml,sha256=NkUviVsteFGvRw8YlkqhowzHbUt9JmsnyfVBTrwXWeI,864
 odoo/addons/sale_order_line_price_history/wizards/__init__.py,sha256=2YY5dPc0K8qK-QYo7c0nOeWSJ7z2UM95hhzAKN2dDv4,108
-odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.py,sha256=Bfe2N82jANtIbR9gZ9nVuXjx5nbvzMVIaaH7ubMNfKc,4511
-odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.xml,sha256=LQXcj1fNel6Xxv8cEhfLX7Vg-np96iTEFquOX7jwe1A,4067
-odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/METADATA,sha256=x6z3F1qEZOVDzoUwiUyp0bE4qnOz0jWL5FDEbSd6fo4,4827
-odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_sale_order_line_price_history-15.0.1.0.0.7.dist-info/RECORD,,
+odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.py,sha256=DABYKKr2qmYaY86DkDyz1P-DWKgZ6Buvyzot34jo3M8,4823
+odoo/addons/sale_order_line_price_history/wizards/sale_order_line_price_history.xml,sha256=aRJ6FUpBOWDxQ6uJzgFfJZz4Huy19XnrTFUaLmZ6glk,4087
+odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/METADATA,sha256=UKf8KMfRDWUF1uhTHIpIB0P7_g0yBBJWEMihcUbVtLA,4828
+odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_sale_order_line_price_history-16.0.1.0.0.2.dist-info/RECORD,,
```

