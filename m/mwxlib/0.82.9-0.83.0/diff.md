# Comparing `tmp/mwxlib-0.82.9-py3-none-any.whl.zip` & `tmp/mwxlib-0.83.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,24 +1,24 @@
-Zip file size: 161722 bytes, number of entries: 22
+Zip file size: 161699 bytes, number of entries: 22
 -rw-rw-rw-  2.0 fat     2520 b- defN 23-May-02 16:40 mwx/__init__.py
 -rw-rw-rw-  2.0 fat    43445 b- defN 23-May-02 17:15 mwx/controls.py
--rw-rw-rw-  2.0 fat    73526 b- defN 23-May-11 06:06 mwx/framework.py
--rw-rw-rw-  2.0 fat    69631 b- defN 23-May-10 07:23 mwx/graphman.py
+-rw-rw-rw-  2.0 fat    73547 b- defN 23-May-13 15:56 mwx/framework.py
+-rw-rw-rw-  2.0 fat    69631 b- defN 23-May-12 06:31 mwx/graphman.py
 -rw-rw-rw-  2.0 fat    46248 b- defN 23-Feb-21 08:49 mwx/images.py
 -rw-rw-rw-  2.0 fat    36004 b- defN 23-Apr-27 09:45 mwx/matplot2.py
--rw-rw-rw-  2.0 fat    67652 b- defN 23-May-10 07:23 mwx/matplot2g.py
+-rw-rw-rw-  2.0 fat    67652 b- defN 23-May-13 15:57 mwx/matplot2g.py
 -rw-rw-rw-  2.0 fat    27606 b- defN 23-Apr-27 09:45 mwx/matplot2lg.py
 -rw-rw-rw-  2.0 fat     6878 b- defN 23-Feb-21 08:50 mwx/mgplt.py
--rw-rw-rw-  2.0 fat   138196 b- defN 23-May-11 06:06 mwx/nutshell.py
+-rw-rw-rw-  2.0 fat   138196 b- defN 23-May-12 06:24 mwx/nutshell.py
 -rw-rw-rw-  2.0 fat    36924 b- defN 23-May-07 16:44 mwx/utilus.py
 -rw-rw-rw-  2.0 fat    11335 b- defN 23-May-02 13:35 mwx/wxmon.py
--rw-rw-rw-  2.0 fat    19672 b- defN 23-May-10 05:12 mwx/wxpdb.py
+-rw-rw-rw-  2.0 fat    19359 b- defN 23-May-13 15:56 mwx/wxpdb.py
 -rw-rw-rw-  2.0 fat     5246 b- defN 23-Mar-25 12:54 mwx/wxwil.py
--rw-rw-rw-  2.0 fat     7416 b- defN 23-Apr-29 16:25 mwx/wxwit.py
+-rw-rw-rw-  2.0 fat     7416 b- defN 23-May-12 15:08 mwx/wxwit.py
 -rw-rw-rw-  2.0 fat        0 b- defN 23-Jan-23 14:06 mwx/py/__init__.py
 -rw-rw-rw-  2.0 fat    16794 b- defN 23-Apr-27 09:45 mwx/py/filling.py
--rw-rw-rw-  2.0 fat     1091 b- defN 23-May-11 10:26 mwxlib-0.82.9.dist-info/LICENSE
--rw-rw-rw-  2.0 fat     1893 b- defN 23-May-11 10:26 mwxlib-0.82.9.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-May-11 10:26 mwxlib-0.82.9.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        4 b- defN 23-May-11 10:26 mwxlib-0.82.9.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     1609 b- defN 23-May-11 10:26 mwxlib-0.82.9.dist-info/RECORD
-22 files, 613782 bytes uncompressed, 159220 bytes compressed:  74.1%
+-rw-rw-rw-  2.0 fat     1091 b- defN 23-May-13 15:57 mwxlib-0.83.0.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat     1893 b- defN 23-May-13 15:57 mwxlib-0.83.0.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-May-13 15:57 mwxlib-0.83.0.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        4 b- defN 23-May-13 15:57 mwxlib-0.83.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     1609 b- defN 23-May-13 15:57 mwxlib-0.83.0.dist-info/RECORD
+22 files, 613490 bytes uncompressed, 159197 bytes compressed:  74.1%
```

## zipnote {}

```diff
@@ -45,23 +45,23 @@
 
 Filename: mwx/py/__init__.py
 Comment: 
 
 Filename: mwx/py/filling.py
 Comment: 
 
-Filename: mwxlib-0.82.9.dist-info/LICENSE
+Filename: mwxlib-0.83.0.dist-info/LICENSE
 Comment: 
 
-Filename: mwxlib-0.82.9.dist-info/METADATA
+Filename: mwxlib-0.83.0.dist-info/METADATA
 Comment: 
 
-Filename: mwxlib-0.82.9.dist-info/WHEEL
+Filename: mwxlib-0.83.0.dist-info/WHEEL
 Comment: 
 
-Filename: mwxlib-0.82.9.dist-info/top_level.txt
+Filename: mwxlib-0.83.0.dist-info/top_level.txt
 Comment: 
 
-Filename: mwxlib-0.82.9.dist-info/RECORD
+Filename: mwxlib-0.83.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## mwx/framework.py

```diff
@@ -1,14 +1,14 @@
 #! python3
 # -*- coding: utf-8 -*-
 """mwxlib framework
 
 Author: Kazuya O'moto <komoto@jeol.co.jp>
 """
-__version__ = "0.82.9"
+__version__ = "0.83.0"
 __author__ = "Kazuya O'moto <komoto@jeol.co.jp>"
 
 from functools import wraps, partial
 from importlib import reload
 import traceback
 import builtins
 import datetime
@@ -1149,20 +1149,20 @@
         
         ## py-mode
         self.Scratch.set_attributes(Style=Nautilus.STYLE)
         
         self.set_hookable(self.Scratch)
         
         @self.Scratch.define_key('C-j')
-        def eval_line(v):
+        def eval_line():
             shell = self.current_shell
             self.Scratch.buffer.py_eval_line(shell.globals, shell.locals)
         
         @self.Scratch.define_key('M-j')
-        def exec_buffer(v):
+        def exec_buffer():
             shell = self.current_shell
             self.Scratch.buffer.py_exec_region(shell.globals, shell.locals)
         
         ## text-mode
         self.set_hookable(self.Log)
         
         self.Log.set_attributes(ReadOnly=True)
@@ -1273,16 +1273,15 @@
                     "Enter [q]uit to exit before closing.\n"
                     "Continue closing?",
                     style=wx.YES_NO|wx.ICON_INFORMATION) != wx.YES:
                 self.message("The close has been canceled.")
                 evt.Veto()
                 return
             #? RuntimeError('wrapped C/C++ object ... has been deleted')
-            ## self.Quit()
-            return
+            self.Quit()
         
         if self.debugger.tracing:
             wx.MessageBox("The debugger ends tracing.\n\n"
                           "The trace pointer will be cleared.")
             self.debugger.unwatch() # cf. [pointer_unset] stop_trace
         
         for book in self.get_all_pages(type(self.Log)):
@@ -1295,15 +1294,14 @@
                             "Changes to the content will be discarded.\n"
                             "Continue closing?",
                             "Close {!r}".format(buf.name),
                             style=wx.YES_NO|wx.ICON_INFORMATION) != wx.YES:
                         self.message("The close has been canceled.")
                         evt.Veto()
                         return
-        
         if self.__standalone:
             evt.Skip() # Close the window
         else:
             self.Show(0) # Don't destroy the window
     
     def OnShow(self, evt):
         pane = self._mgr.GetPane(self.watcher)
@@ -1593,14 +1591,15 @@
     set_traceable = set_hookable # for backward compatibility
     
     def start_trace(self, line, book):
         if not self.debugger.busy:
             self.debugger.unwatch()
             self.debugger.editor = book
             self.debugger.watch((book.buffer.filename, line+1))
+            self.debugger.send_input('') # clear input
         book.buffer.del_marker(4)
     
     def stop_trace(self, line, book):
         if self.debugger.busy:
             return
         if self.debugger.tracing:
             self.debugger.editor = None
```

## mwx/wxpdb.py

```diff
@@ -189,54 +189,51 @@
         else:
             self.editor.buffer.MarkerDeleteAll(style)
     
     def send_input(self, c, echo=False):
         """Send input:str (echo message if needed)."""
         def _send():
             self.stdin.input = c
+            if echo or self.verbose:
+                self.message(c, indent=0)
         wx.CallAfter(_send)
-        if echo or self.verbose:
-            self.message(c, indent=0)
     
     def message(self, msg, indent=True):
         """Add prefix and insert msg at the end of command-line."""
         shell = self.interactive_shell
         shell.goto_char(shell.eolc)
         prefix = self.indents if indent else ''
         print("{}{}".format(prefix, msg), file=self.stdout)
     
     def watch(self, bp):
         """Start tracing."""
-        if not self.busy: # don't set while debugging
-            if not bp:
-                self.unwatch()
-                return
-            elif not bp[0]: # no target
-                return
-            self.__hookpoint = bp
-            self.reset()
-            sys.settrace(self.trace_dispatch)
-            threading.settrace(self.trace_dispatch)
-            self.handler('trace_begin', bp)
+        if self.busy: # don't set while debugging
+            return
+        self.__hookpoint = bp
+        self.reset()
+        sys.settrace(self.trace_dispatch)
+        threading.settrace(self.trace_dispatch)
+        self.handler('trace_begin', bp)
     
     def unwatch(self):
         """End tracing."""
-        if not self.busy: # don't unset while debugging
-            bp = self.__hookpoint
-            self.reset()
-            sys.settrace(None)
-            threading.settrace(None)
-            ## delete bp *after* setting dispatcher -> None
-            self.__hookpoint = None
-            if bp:
-                self.handler('trace_end', bp)
-            else:
-                ## Called to abort when the debugger is invalid status:
-                ## e.g., (self.handler.current_state > 0 and not self.busy)
-                self.handler('abort')
+        if self.busy: # don't unset while debugging
+            return
+        bp = self.__hookpoint
+        self.reset()
+        sys.settrace(None)
+        threading.settrace(None)
+        ## delete bp *after* setting dispatcher -> None
+        self.__hookpoint = None
+        if bp:
+            self.handler('trace_end', bp)
+        else:
+            ## Called to abort when the debugger is invalid status:
+            ## e.g., (self.handler.current_state > 0 but not busy)
+            self.handler('abort')
     
     def debug(self, obj, *args, **kwargs):
         """Debug a callable object.
         """
         if not callable(obj):
             wx.MessageBox("Not a callable object.\n\n"
                           "Unable to debug {!r}.".format(obj))
@@ -280,14 +277,15 @@
             pass
         except Exception as e:
             ## Note: CallAfter to avoid crashing by a kill-focus event.
             wx.CallAfter(wx.MessageBox,
                          "Debugger is closed.\n\n{}".format(e))
         finally:
             self.set_quit()
+            return
     
     ## --------------------------------
     ## Actions for handler
     ## --------------------------------
     
     def find_editor(self, f):
         """Find parent editor which has the specified f:object,
@@ -299,17 +297,14 @@
                 editor.swap_page(buf)
                 return editor
     
     def on_debug_begin(self, frame):
         """Called before set_trace.
         Note: self.busy -> False or None
         """
-        shell = self.interactive_shell
-        shell.goto_char(shell.eolc)
-        self.__interactive = shell.cpos
         self.__hookpoint = None
         self.indents = ' ' * 2
         self.stdin.input = '' # clear stdin buffer
         def _continue():
             if wx.IsBusy():
                 wx.EndBusyCursor()
         wx.CallAfter(_continue)
@@ -343,43 +338,43 @@
                     buffer.goto_marker(1)
                     buffer.recenter(3)
                 buffer.goto_line(lineno - 1)
                 buffer.pointer = lineno - 1 # (->) pointer:marker
                 buffer.EnsureLineMoreOnScreen(lineno - 1)
             self.code = code
         wx.CallAfter(_mark)
-        self.__interactive = self.interactive_shell.cpos
     
     def on_debug_next(self, frame):
         """Called in preloop (cmdloop)."""
+        shell = self.interactive_shell
+        self.__cpos = shell.cpos
         def _next():
-            shell = self.interactive_shell
             shell.goto_char(shell.eolc)
-            pos = self.__interactive
+            pos = self.__cpos
             out = shell.GetTextRange(pos, shell.cpos)
             if out.strip(' ') == self.prompt.strip(' ') and pos > shell.bol:
                 shell.cpos = pos # backward selection
                 shell.ReplaceSelection('')
                 shell.prompt()
             shell.EnsureCaretVisible()
-            self.__interactive = shell.cpos
+            self.__cpos = shell.cpos
         wx.CallAfter(_next)
     
     def on_debug_end(self, frame):
         """Called after set_quit.
         Note: self.busy -> True (until this stage)
         """
-        self.__interactive = None
-        del self.editor.buffer.pointer
-        self.editor = None
+        if self.editor:
+            del self.editor.buffer.pointer
+            self.editor = None
         self.code = None
-        main = threading.main_thread()
-        thread = threading.current_thread()
-        if thread is not main:
-            self.send_input('\n') # terminates the reader
+        
+        ## Note: Required to terminate the reader of threading pdb.
+        self.send_input('\n')
+        
         def _continue():
             if wx.IsBusy():
                 wx.EndBusyCursor()
         wx.CallAfter(_continue)
     
     def on_trace_hook(self, frame):
         """Called when a breakppoint is reached."""
@@ -466,15 +461,16 @@
         self.stamp_marker(lineno, 1)
         return Pdb.set_break(self, filename, lineno, *args, **kwargs)
     
     def set_quit(self):
         try:
             Pdb.set_quit(self)
         finally:
-            self.handler('debug_end', self.curframe)
+            if self.parent: # Check if Destroy has begun.
+                self.handler('debug_end', self.curframe)
             return
     
     ## --------------------------------
     ## Override Pdb methods
     ## --------------------------------
     
     @echo
```

## Comparing `mwxlib-0.82.9.dist-info/LICENSE` & `mwxlib-0.83.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `mwxlib-0.82.9.dist-info/METADATA` & `mwxlib-0.83.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: mwxlib
-Version: 0.82.9
+Version: 0.83.0
 Summary: A wrapper of matplotlib and wxPython (phoenix)
 Home-page: https://github.com/komoto48g/mwxlib
 Author: Kazuya O'moto <komoto@jeol.co.jp>
 Author-email: komoto@jeol.co.jp
 License: MIT
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Programming Language :: Python :: 3
```

## Comparing `mwxlib-0.82.9.dist-info/RECORD` & `mwxlib-0.83.0.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,22 +1,22 @@
 mwx/__init__.py,sha256=bSRdncjfSCKycMFQVnagOi9R2vUCC5snGkjea7jqPgU,2520
 mwx/controls.py,sha256=7hnSimA3bKDgTct29l6Hqpq7BCKqCeOjZJ6JQ1xjh7I,43445
-mwx/framework.py,sha256=yQvaa4_fN1LERo8bnn5opTI7cdXTqegp8S1kiGFLBWU,73526
+mwx/framework.py,sha256=gstFOhhfvY-Y_bJ-V1-iV2d9iCM7fNmfItgeyECOMEY,73547
 mwx/graphman.py,sha256=AY5uDOwuguJdCi_7CHBHxuuO8p3AuXtdY-meIY-caIU,69631
 mwx/images.py,sha256=9e8X7OpJ6Z3fF3ez17P_qk2D1NMO10-lN8TCtulAqT0,46248
 mwx/matplot2.py,sha256=mzctMUk00m-tvs268PTwdLln7G3NCl6J-5zFzJkfsVI,36004
 mwx/matplot2g.py,sha256=0ysXo-mnluvaikIq2d9FiF8MM07Nzxx3ILpUkIXsPnQ,67652
 mwx/matplot2lg.py,sha256=h_aFij_7ksG2DXuYCaGmjtlcl122vZnwbMTv21Mprcg,27606
 mwx/mgplt.py,sha256=49_wpFZUEKErQmtobqrlNKDjWlAsdLft-izlqSyGPD0,6878
 mwx/nutshell.py,sha256=foEdUYR4Am4P1rP2kHJ6fQoNNG-l73uPaPlp-kHQw3g,138196
 mwx/utilus.py,sha256=yl0pVbi1f-Nj02GchztVS-kA2bx0WGAb-JgyD32pacE,36924
 mwx/wxmon.py,sha256=L2Q9n2zaSAWruUcBWw9lPpe-NIshoD3LR9o_sRqNENo,11335
-mwx/wxpdb.py,sha256=-_T83x48tKnMAkY3yEkmxezuFlL66e0CVineMc-62BE,19672
+mwx/wxpdb.py,sha256=orVy4H1AhVaybw1LWrT_H-g2YVf7mOwxrH_1A_A57aY,19359
 mwx/wxwil.py,sha256=BUfEF0Nc1E-mVC3Vdz6k1E-2s5J0PO6qEzRQ6lfyePI,5246
 mwx/wxwit.py,sha256=-Dy09jCdKHNSbiFCFR3xM92_4PacdSRlPBZcLXIUeVo,7416
 mwx/py/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 mwx/py/filling.py,sha256=f6KMBcBv7gwrl6qmJYLTL-O0Z47bWNAdTCZtUZIo8vM,16794
-mwxlib-0.82.9.dist-info/LICENSE,sha256=PGtRKCaTkmUDlBQwpptJAxJtdqxIUtAmdBsaT9nUVkA,1091
-mwxlib-0.82.9.dist-info/METADATA,sha256=Umk0q9wWnWtdnmK9S1YdnLhamkYqa3E_qGxifyR60yA,1893
-mwxlib-0.82.9.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-mwxlib-0.82.9.dist-info/top_level.txt,sha256=SI1Mh118AstnUFGPNq5aMNKiAnVNmZk1S9Ij-OwAEpY,4
-mwxlib-0.82.9.dist-info/RECORD,,
+mwxlib-0.83.0.dist-info/LICENSE,sha256=PGtRKCaTkmUDlBQwpptJAxJtdqxIUtAmdBsaT9nUVkA,1091
+mwxlib-0.83.0.dist-info/METADATA,sha256=5HCmzU_6cAeVXt0hbWu4hMZhLA5bX6_ABOxo23ppe9E,1893
+mwxlib-0.83.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+mwxlib-0.83.0.dist-info/top_level.txt,sha256=SI1Mh118AstnUFGPNq5aMNKiAnVNmZk1S9Ij-OwAEpY,4
+mwxlib-0.83.0.dist-info/RECORD,,
```

